{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/DataTableX.jsx"],"names":[],"mappings":"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","file":"DataTableX.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","let items = {\r\n    initialKey: 'age',\r\n    initialReverse: false,\r\n    data: [\r\n        {\r\n            id: 0,\r\n            name: \"ozy\",\r\n            ethnicity: \"chinese\",\r\n            nationality: \"american\",\r\n            age: 28,\r\n            height: 70\r\n        },\r\n        {\r\n            id: 1,\r\n            name: 'edson',\r\n            ethnicity: 'mestizo',\r\n            nationality: 'brazilian',\r\n            age: 31,\r\n            height: 72\r\n        },\r\n        {\r\n            id: 2,\r\n            name: \"ricky\",\r\n            ethnicity: \"spanish\",\r\n            nationality: \"spanish\",\r\n            age: 27,\r\n            height: 75\r\n        },\r\n        {\r\n            id: 3,\r\n            name: \"risa\",\r\n            ethnicity: \"japanese\",\r\n            nationality: \"japanese\",\r\n            age: 24,\r\n            height: 65\r\n        }\r\n    ]\r\n}\r\n\r\n/**\r\n * \r\n */\r\nclass TableElement extends React.Component {\r\n    constructor(props) {\r\n        // console.log('constructor');\r\n        super(props);\r\n\r\n        this.initialKey = props.items.initialKey;\r\n        this.items = props.items.data;\r\n        this.itemKeys = Object.keys(this.items[0]);\r\n\r\n        this.state = {\r\n            items: this.items,\r\n            reversed: false,\r\n            activeKey: null,\r\n        }\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleResetClick = this.handleResetClick.bind(this);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    componentWillMount() {\r\n        // console.log('componentWillMount');\r\n        this.setState({\r\n            items: this.initData(this.items),\r\n            activeKey: this.initialKey\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    componentDidMount() {\r\n        // console.log('componentDidMount');\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    initData(props) {\r\n        let initData;\r\n\r\n        if (this.initialKey) {\r\n            initData = this.sortedData(this.initialKey)\r\n        } else {\r\n            initData = this.items;\r\n        }\r\n\r\n        return initData;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    clonedData(data) {\r\n        return data.slice(0);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    sortedData(key) {\r\n        // console.log('sortedData');\r\n        let thisClonedData = this.clonedData(this.items);\r\n        let sortedClonedData = thisClonedData.sort((a, b) => {\r\n            if (this.state.reversed) {\r\n                this.setState({reversed: false})\r\n                return b[key] - a[key];\r\n            } else {\r\n                this.setState({reversed: true})\r\n                return a[key] - b[key];\r\n            }\r\n        });\r\n\r\n        return sortedClonedData;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleState(itemKey) {\r\n        // console.log(this.sortedData(itemKey));\r\n        this.setState({\r\n            items: this.sortedData(itemKey),\r\n            activeKey: itemKey\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleClick(itemKey) {\r\n        this.handleState(itemKey);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    resetData() {\r\n        this.setState({\r\n            items: this.items\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleResetClick() {\r\n        this.resetData();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    render() {\r\n        // console.log('render');\r\n        return (\r\n            <div className=\"datatablex\">\r\n                <table>\r\n                    <tbody>\r\n                        <TableHead activeKey={this.state.activeKey} items={this.items} itemKeys={this.itemKeys} handleClick={this.handleClick} />\r\n                        <TableRows activeKey={this.state.activeKey} items={this.state.items} itemKeys={this.itemKeys} />\r\n                    </tbody>\r\n                </table>\r\n                <ResetButton handleResetClick={this.handleResetClick} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction setSortingClass(activeKey, sampleKey) {\r\n    let className = '';\r\n\r\n    if (activeKey === sampleKey) {\r\n        className += 'is-sorting';\r\n    } else {\r\n        className = '';\r\n    }\r\n\r\n    return className;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableHead(props) {\r\n    let itemKeys = props.itemKeys;\r\n    let items = props.items;\r\n    let sampleItem = items[0];\r\n    \r\n    let TableHeadCells = itemKeys.map((itemKey, index) => {\r\n        if (itemKey !== 'id') {\r\n            return (\r\n                <TableHeadCell \r\n                    key={itemKey}\r\n                    activeKey={props.activeKey}\r\n                    sampleKey={itemKey} \r\n                    sampleKeyValue={sampleItem[itemKey]} \r\n                    handleClick={props.handleClick}\r\n                />\r\n            )\r\n        }\r\n    })\r\n\r\n    return (\r\n        <tr>\r\n            {TableHeadCells}\r\n        </tr>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableHeadCell(props) {\r\n    let activeKey = props.activeKey;\r\n    let sampleKey = props.sampleKey;\r\n    let sampleKeyValue = props.sampleKeyValue;\r\n\r\n    let TableHeadCellElement;\r\n\r\n    if (isNaN(sampleKeyValue)) {\r\n        TableHeadCellElement = (sampleKey)\r\n    } else {\r\n        TableHeadCellElement = (<TableToggle sampleKey={sampleKey} handleClick={props.handleClick} />)\r\n    }\r\n\r\n    return (\r\n        <td className={setSortingClass(activeKey, sampleKey)}>{TableHeadCellElement}</td>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableToggle(props) {\r\n    let sampleKey = props.sampleKey;\r\n    return (\r\n        <a href=\"#\" onClick={props.handleClick.bind(this, sampleKey)}>{sampleKey}</a>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableRows(props) {\r\n    let activeKey = props.activeKey;\r\n    let items = props.items;\r\n    let itemKeys = props.itemKeys;\r\n\r\n    let tableRows = items.map((item, index) => {\r\n        return (\r\n            <TableRow key={item.id} activeKey={activeKey} itemKeys={itemKeys} item={item} />\r\n        )\r\n    })\r\n\r\n    return tableRows;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableRow(props) {\r\n    let activeKey = props.activeKey;\r\n    let item = props.item;\r\n    let itemKeys = props.itemKeys;\r\n\r\n    let tableCells = itemKeys.map((itemKey, index) => {\r\n        if (itemKey !== 'id') {\r\n            return (\r\n                <TableCell key={itemKey} activeKey={activeKey} itemKey={itemKey} itemValue={item[itemKey]} />\r\n            )\r\n        }\r\n    })\r\n\r\n    return (\r\n        <tr>\r\n            {tableCells}\r\n        </tr>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableCell(props) {\r\n    let activeKey = props.activeKey;\r\n    let itemKey = props.itemKey;\r\n    let itemValue = props.itemValue;\r\n\r\n    return (\r\n        <td className={setSortingClass(activeKey, itemKey)}>{itemValue}</td>\r\n    )\r\n}\r\n\r\n/**\r\n * Reset table data to show defaults\r\n */\r\n\r\n/**\r\n * Reset button component\r\n */\r\nfunction ResetButton(props) {\r\n    return (\r\n        <a href=\"#\" onClick={props.handleResetClick}>reset</a>\r\n    )\r\n}\r\n\r\nReactDOM.render(<TableElement items={items} />, document.getElementById('root'));"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvRGF0YVRhYmxlWC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0FDQUEsSUFBSSxRQUFRO0FBQ1IsZ0JBQVksS0FESjtBQUVSLG9CQUFnQixLQUZSO0FBR1IsVUFBTSxDQUNGO0FBQ0ksWUFBSSxDQURSO0FBRUksY0FBTSxLQUZWO0FBR0ksbUJBQVcsU0FIZjtBQUlJLHFCQUFhLFVBSmpCO0FBS0ksYUFBSyxFQUxUO0FBTUksZ0JBQVE7QUFOWixLQURFLEVBU0Y7QUFDSSxZQUFJLENBRFI7QUFFSSxjQUFNLE9BRlY7QUFHSSxtQkFBVyxTQUhmO0FBSUkscUJBQWEsV0FKakI7QUFLSSxhQUFLLEVBTFQ7QUFNSSxnQkFBUTtBQU5aLEtBVEUsRUFpQkY7QUFDSSxZQUFJLENBRFI7QUFFSSxjQUFNLE9BRlY7QUFHSSxtQkFBVyxTQUhmO0FBSUkscUJBQWEsU0FKakI7QUFLSSxhQUFLLEVBTFQ7QUFNSSxnQkFBUTtBQU5aLEtBakJFLEVBeUJGO0FBQ0ksWUFBSSxDQURSO0FBRUksY0FBTSxNQUZWO0FBR0ksbUJBQVcsVUFIZjtBQUlJLHFCQUFhLFVBSmpCO0FBS0ksYUFBSyxFQUxUO0FBTUksZ0JBQVE7QUFOWixLQXpCRTs7QUFvQ1Y7OztBQXZDWSxDQUFaO0lBMENNLFk7OztBQUNGLDBCQUFZLEtBQVosRUFBbUI7QUFBQTs7QUFBQSxnSUFFVCxLQUZTO0FBQ2Y7OztBQUdBLGNBQUssVUFBTCxHQUFrQixNQUFNLEtBQU4sQ0FBWSxVQUE5QjtBQUNBLGNBQUssS0FBTCxHQUFhLE1BQU0sS0FBTixDQUFZLElBQXpCO0FBQ0EsY0FBSyxRQUFMLEdBQWdCLE9BQU8sSUFBUCxDQUFZLE1BQUssS0FBTCxDQUFXLENBQVgsQ0FBWixDQUFoQjs7QUFFQSxjQUFLLEtBQUwsR0FBYTtBQUNULG1CQUFPLE1BQUssS0FESDtBQUVULHNCQUFVLEtBRkQ7QUFHVCx1QkFB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LENBQWY7QUFBcUQ7QUFBckQsS0FESjtBQUdIOztBQUVEOzs7O0FBSUE7OztBQUdBLFNBQVMsV0FBVCxDQUFxQixLQUFyQixFQUE0QjtBQUN4QixXQUNJO0FBQUE7QUFBQSxVQUFHLE1BQUssR0FBUixFQUFZLFNBQVMsTUFBTSxnQkFBM0I7QUFBQTtBQUFBLEtBREo7QUFHSDs7QUFFRCxTQUFTLE1BQVQsQ0FBZ0Isb0JBQUMsWUFBRCxJQUFjLE9BQU8sS0FBckIsR0FBaEIsRUFBZ0QsU0FBUyxjQUFULENBQXdCLE1BQXhCLENBQWhEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibGV0IGl0ZW1zID0ge1xyXG4gICAgaW5pdGlhbEtleTogJ2FnZScsXHJcbiAgICBpbml0aWFsUmV2ZXJzZTogZmFsc2UsXHJcbiAgICBkYXRhOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogMCxcclxuICAgICAgICAgICAgbmFtZTogXCJvenlcIixcclxuICAgICAgICAgICAgZXRobmljaXR5OiBcImNoaW5lc2VcIixcclxuICAgICAgICAgICAgbmF0aW9uYWxpdHk6IFwiYW1lcmljYW5cIixcclxuICAgICAgICAgICAgYWdlOiAyOCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA3MFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogMSxcclxuICAgICAgICAgICAgbmFtZTogJ2Vkc29uJyxcclxuICAgICAgICAgICAgZXRobmljaXR5OiAnbWVzdGl6bycsXHJcbiAgICAgICAgICAgIG5hdGlvbmFsaXR5OiAnYnJhemlsaWFuJyxcclxuICAgICAgICAgICAgYWdlOiAzMSxcclxuICAgICAgICAgICAgaGVpZ2h0OiA3MlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogMixcclxuICAgICAgICAgICAgbmFtZTogXCJyaWNreVwiLFxyXG4gICAgICAgICAgICBldGhuaWNpdHk6IFwic3BhbmlzaFwiLFxyXG4gICAgICAgICAgICBuYXRpb25hbGl0eTogXCJzcGFuaXNoXCIsXHJcbiAgICAgICAgICAgIGFnZTogMjcsXHJcbiAgICAgICAgICAgIGhlaWdodDogNzVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDMsXHJcbiAgICAgICAgICAgIG5hbWU6IFwicmlzYVwiLFxyXG4gICAgICAgICAgICBldGhuaWNpdHk6IFwiamFwYW5lc2VcIixcclxuICAgICAgICAgICAgbmF0aW9uYWxpdHk6IFwiamFwYW5lc2VcIixcclxuICAgICAgICAgICAgYWdlOiAyNCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA2NVxyXG4gICAgICAgIH1cclxuICAgIF1cclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKi9cclxuY2xhc3MgVGFibGVFbGVtZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvbnN0cnVjdG9yJyk7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxLZXkgPSBwcm9wcy5pdGVtcy5pbml0aWFsS2V5O1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBwcm9wcy5pdGVtcy5kYXRhO1xyXG4gICAgICAgIHRoaXMuaXRlbUtleXMgPSBPYmplY3Qua2V5cyh0aGlzLml0ZW1zWzBdKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgIHJldmVyc2VkOiBmYWxzZSxcclxuICAgICAgICAgICAgYWN0aXZlS2V5OiBudWxsLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDbGljayA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZVJlc2V0Q2xpY2sgPSB0aGlzLmhhbmRsZVJlc2V0Q2xpY2suYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NvbXBvbmVudFdpbGxNb3VudCcpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpdGVtczogdGhpcy5pbml0RGF0YSh0aGlzLml0ZW1zKSxcclxuICAgICAgICAgICAgYWN0aXZlS2V5OiB0aGlzLmluaXRpYWxLZXlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnREaWRNb3VudCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIGluaXREYXRhKHByb3BzKSB7XHJcbiAgICAgICAgbGV0IGluaXREYXRhO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbml0aWFsS2V5KSB7XHJcbiAgICAgICAgICAgIGluaXREYXRhID0gdGhpcy5zb3J0ZWREYXRhKHRoaXMuaW5pdGlhbEtleSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbml0RGF0YSA9IHRoaXMuaXRlbXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaW5pdERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgY2xvbmVkRGF0YShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuc2xpY2UoMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgc29ydGVkRGF0YShrZXkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnc29ydGVkRGF0YScpO1xyXG4gICAgICAgIGxldCB0aGlzQ2xvbmVkRGF0YSA9IHRoaXMuY2xvbmVkRGF0YSh0aGlzLml0ZW1zKTtcclxuICAgICAgICBsZXQgc29ydGVkQ2xvbmVkRGF0YSA9IHRoaXNDbG9uZWREYXRhLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUucmV2ZXJzZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3JldmVyc2VkOiBmYWxzZX0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYltrZXldIC0gYVtrZXldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cmV2ZXJzZWQ6IHRydWV9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFba2V5XSAtIGJba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gc29ydGVkQ2xvbmVkRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVTdGF0ZShpdGVtS2V5KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5zb3J0ZWREYXRhKGl0ZW1LZXkpKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuc29ydGVkRGF0YShpdGVtS2V5KSxcclxuICAgICAgICAgICAgYWN0aXZlS2V5OiBpdGVtS2V5XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVDbGljayhpdGVtS2V5KSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTdGF0ZShpdGVtS2V5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICByZXNldERhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVSZXNldENsaWNrKCkge1xyXG4gICAgICAgIHRoaXMucmVzZXREYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZW5kZXInKTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhdGF0YWJsZXhcIj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZUhlYWQgYWN0aXZlS2V5PXt0aGlzLnN0YXRlLmFjdGl2ZUtleX0gaXRlbXM9e3RoaXMuaXRlbXN9IGl0ZW1LZXlzPXt0aGlzLml0ZW1LZXlzfSBoYW5kbGVDbGljaz17dGhpcy5oYW5kbGVDbGlja30gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRhYmxlUm93cyBhY3RpdmVLZXk9e3RoaXMuc3RhdGUuYWN0aXZlS2V5fSBpdGVtcz17dGhpcy5zdGF0ZS5pdGVtc30gaXRlbUtleXM9e3RoaXMuaXRlbUtleXN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgICA8UmVzZXRCdXR0b24gaGFuZGxlUmVzZXRDbGljaz17dGhpcy5oYW5kbGVSZXNldENsaWNrfSAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIHNldFNvcnRpbmdDbGFzcyhhY3RpdmVLZXksIHNhbXBsZUtleSkge1xyXG4gICAgbGV0IGNsYXNzTmFtZSA9ICcnO1xyXG5cclxuICAgIGlmIChhY3RpdmVLZXkgPT09IHNhbXBsZUtleSkge1xyXG4gICAgICAgIGNsYXNzTmFtZSArPSAnaXMtc29ydGluZyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsYXNzTmFtZSA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjbGFzc05hbWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIFRhYmxlSGVhZChwcm9wcykge1xyXG4gICAgbGV0IGl0ZW1LZXlzID0gcHJvcHMuaXRlbUtleXM7XHJcbiAgICBsZXQgaXRlbXMgPSBwcm9wcy5pdGVtcztcclxuICAgIGxldCBzYW1wbGVJdGVtID0gaXRlbXNbMF07XHJcbiAgICBcclxuICAgIGxldCBUYWJsZUhlYWRDZWxscyA9IGl0ZW1LZXlzLm1hcCgoaXRlbUtleSwgaW5kZXgpID0+IHtcclxuICAgICAgICBpZiAoaXRlbUtleSAhPT0gJ2lkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFRhYmxlSGVhZENlbGwgXHJcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpdGVtS2V5fVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUtleT17cHJvcHMuYWN0aXZlS2V5fVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUtleT17aXRlbUtleX0gXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlS2V5VmFsdWU9e3NhbXBsZUl0ZW1baXRlbUtleV19IFxyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUNsaWNrPXtwcm9wcy5oYW5kbGVDbGlja31cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICB7VGFibGVIZWFkQ2VsbHN9XHJcbiAgICAgICAgPC90cj5cclxuICAgIClcclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKi9cclxuZnVuY3Rpb24gVGFibGVIZWFkQ2VsbChwcm9wcykge1xyXG4gICAgbGV0IGFjdGl2ZUtleSA9IHByb3BzLmFjdGl2ZUtleTtcclxuICAgIGxldCBzYW1wbGVLZXkgPSBwcm9wcy5zYW1wbGVLZXk7XHJcbiAgICBsZXQgc2FtcGxlS2V5VmFsdWUgPSBwcm9wcy5zYW1wbGVLZXlWYWx1ZTtcclxuXHJcbiAgICBsZXQgVGFibGVIZWFkQ2VsbEVsZW1lbnQ7XHJcblxyXG4gICAgaWYgKGlzTmFOKHNhbXBsZUtleVZhbHVlKSkge1xyXG4gICAgICAgIFRhYmxlSGVhZENlbGxFbGVtZW50ID0gKHNhbXBsZUtleSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgVGFibGVIZWFkQ2VsbEVsZW1lbnQgPSAoPFRhYmxlVG9nZ2xlIHNhbXBsZUtleT17c2FtcGxlS2V5fSBoYW5kbGVDbGljaz17cHJvcHMuaGFuZGxlQ2xpY2t9IC8+KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRkIGNsYXNzTmFtZT17c2V0U29ydGluZ0NsYXNzKGFjdGl2ZUtleSwgc2FtcGxlS2V5KX0+e1RhYmxlSGVhZENlbGxFbGVtZW50fTwvdGQ+XHJcbiAgICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIFRhYmxlVG9nZ2xlKHByb3BzKSB7XHJcbiAgICBsZXQgc2FtcGxlS2V5ID0gcHJvcHMuc2FtcGxlS2V5O1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e3Byb3BzLmhhbmRsZUNsaWNrLmJpbmQodGhpcywgc2FtcGxlS2V5KX0+e3NhbXBsZUtleX08L2E+XHJcbiAgICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIFRhYmxlUm93cyhwcm9wcykge1xyXG4gICAgbGV0IGFjdGl2ZUtleSA9IHByb3BzLmFjdGl2ZUtleTtcclxuICAgIGxldCBpdGVtcyA9IHByb3BzLml0ZW1zO1xyXG4gICAgbGV0IGl0ZW1LZXlzID0gcHJvcHMuaXRlbUtleXM7XHJcblxyXG4gICAgbGV0IHRhYmxlUm93cyA9IGl0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VGFibGVSb3cga2V5PXtpdGVtLmlkfSBhY3RpdmVLZXk9e2FjdGl2ZUtleX0gaXRlbUtleXM9e2l0ZW1LZXlzfSBpdGVtPXtpdGVtfSAvPlxyXG4gICAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIHRhYmxlUm93cztcclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKi9cclxuZnVuY3Rpb24gVGFibGVSb3cocHJvcHMpIHtcclxuICAgIGxldCBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXk7XHJcbiAgICBsZXQgaXRlbSA9IHByb3BzLml0ZW07XHJcbiAgICBsZXQgaXRlbUtleXMgPSBwcm9wcy5pdGVtS2V5cztcclxuXHJcbiAgICBsZXQgdGFibGVDZWxscyA9IGl0ZW1LZXlzLm1hcCgoaXRlbUtleSwgaW5kZXgpID0+IHtcclxuICAgICAgICBpZiAoaXRlbUtleSAhPT0gJ2lkJykge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPFRhYmxlQ2VsbCBrZXk9e2l0ZW1LZXl9IGFjdGl2ZUtleT17YWN0aXZlS2V5fSBpdGVtS2V5PXtpdGVtS2V5fSBpdGVtVmFsdWU9e2l0ZW1baXRlbUtleV19IC8+XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICB7dGFibGVDZWxsc31cclxuICAgICAgICA8L3RyPlxyXG4gICAgKVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiBUYWJsZUNlbGwocHJvcHMpIHtcclxuICAgIGxldCBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXk7XHJcbiAgICBsZXQgaXRlbUtleSA9IHByb3BzLml0ZW1LZXk7XHJcbiAgICBsZXQgaXRlbVZhbHVlID0gcHJvcHMuaXRlbVZhbHVlO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPHRkIGNsYXNzTmFtZT17c2V0U29ydGluZ0NsYXNzKGFjdGl2ZUtleSwgaXRlbUtleSl9PntpdGVtVmFsdWV9PC90ZD5cclxuICAgIClcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc2V0IHRhYmxlIGRhdGEgdG8gc2hvdyBkZWZhdWx0c1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZXNldCBidXR0b24gY29tcG9uZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBSZXNldEJ1dHRvbihwcm9wcykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e3Byb3BzLmhhbmRsZVJlc2V0Q2xpY2t9PnJlc2V0PC9hPlxyXG4gICAgKVxyXG59XHJcblxyXG5SZWFjdERPTS5yZW5kZXIoPFRhYmxlRWxlbWVudCBpdGVtcz17aXRlbXN9IC8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTsiXX0="}