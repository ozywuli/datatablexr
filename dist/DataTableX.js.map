{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/DataTableX.jsx"],"names":[],"mappings":"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","file":"DataTableX.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","let items = {\r\n    initialKey: 'age',\r\n    initialReverse: false,\r\n    data: [\r\n        {\r\n            id: 0,\r\n            name: \"ozy\",\r\n            ethnicity: \"chinese\",\r\n            nationality: \"american\",\r\n            age: 28,\r\n            height: 70\r\n        },\r\n        {\r\n            id: 1,\r\n            name: 'edson',\r\n            ethnicity: 'mestizo',\r\n            nationality: 'brazilian',\r\n            age: 31,\r\n            height: 72\r\n        },\r\n        {\r\n            id: 2,\r\n            name: \"ricky\",\r\n            ethnicity: \"spanish\",\r\n            nationality: \"spanish\",\r\n            age: 27,\r\n            height: 75\r\n        },\r\n        {\r\n            id: 3,\r\n            name: \"risa\",\r\n            ethnicity: \"japanese\",\r\n            nationality: \"japanese\",\r\n            age: 24,\r\n            height: 65\r\n        }\r\n    ]\r\n}\r\n\r\n/**\r\n * \r\n */\r\nclass TableElement extends React.Component {\r\n    constructor(props) {\r\n        // console.log('constructor');\r\n        super(props);\r\n\r\n        this.initialKey = props.items.initialKey;\r\n        this.items = props.items.data;\r\n        this.itemKeys = Object.keys(this.items[0]);\r\n\r\n        this.state = {\r\n            items: this.items,\r\n            reversed: false,\r\n            activeKey: null,\r\n        }\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleResetClick = this.handleResetClick.bind(this);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    componentWillMount() {\r\n        // console.log('componentWillMount');\r\n        this.setState({\r\n            items: this.initData(this.items),\r\n            activeKey: this.initialKey\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    componentDidMount() {\r\n        // console.log('componentDidMount');\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    initData(props) {\r\n        let initData;\r\n\r\n        if (this.initialKey) {\r\n            initData = this.sortedData(this.initialKey)\r\n        } else {\r\n            initData = this.items;\r\n        }\r\n\r\n        return initData;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    clonedData(data) {\r\n        return data.slice(0);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    sortedData(key) {\r\n        // console.log('sortedData');\r\n        let thisClonedData = this.clonedData(this.items);\r\n        let sortedClonedData = thisClonedData.sort((a, b) => {\r\n            if (this.state.reversed) {\r\n                this.setState({reversed: false})\r\n                return b[key] - a[key];\r\n            } else {\r\n                this.setState({reversed: true})\r\n                return a[key] - b[key];\r\n            }\r\n        });\r\n\r\n        return sortedClonedData;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleState(itemKey) {\r\n        // console.log(this.sortedData(itemKey));\r\n        this.setState({\r\n            items: this.sortedData(itemKey),\r\n            activeKey: itemKey\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleClick(itemKey) {\r\n        this.handleState(itemKey);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    resetData() {\r\n        this.setState({\r\n            activeKey: this.initialKey,\r\n            items: this.items,\r\n            reversed: false\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    handleResetClick() {\r\n        this.resetData();\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    render() {\r\n        // console.log('render');\r\n        return (\r\n            <div className=\"datatablex\">\r\n                <table>\r\n                    <tbody>\r\n                        <TableHead activeKey={this.state.activeKey} items={this.items} itemKeys={this.itemKeys} handleClick={this.handleClick} />\r\n                        <TableRows activeKey={this.state.activeKey} items={this.state.items} itemKeys={this.itemKeys} />\r\n                    </tbody>\r\n                </table>\r\n                <ResetButton handleResetClick={this.handleResetClick} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction setSortingClass(activeKey, sampleKey) {\r\n    let className = '';\r\n\r\n    if (activeKey === sampleKey) {\r\n        className += 'is-sorting';\r\n    } else {\r\n        className = '';\r\n    }\r\n\r\n    return className;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableHead(props) {\r\n    let itemKeys = props.itemKeys;\r\n    let items = props.items;\r\n    let sampleItem = items[0];\r\n    \r\n    let TableHeadCells = itemKeys.map((itemKey, index) => {\r\n        if (itemKey !== 'id') {\r\n            return (\r\n                <TableHeadCell \r\n                    key={itemKey}\r\n                    activeKey={props.activeKey}\r\n                    sampleKey={itemKey} \r\n                    sampleKeyValue={sampleItem[itemKey]} \r\n                    handleClick={props.handleClick}\r\n                />\r\n            )\r\n        }\r\n    })\r\n\r\n    return (\r\n        <tr>\r\n            {TableHeadCells}\r\n        </tr>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableHeadCell(props) {\r\n    let activeKey = props.activeKey;\r\n    let sampleKey = props.sampleKey;\r\n    let sampleKeyValue = props.sampleKeyValue;\r\n\r\n    let TableHeadCellElement;\r\n\r\n    if (isNaN(sampleKeyValue)) {\r\n        TableHeadCellElement = (sampleKey)\r\n    } else {\r\n        TableHeadCellElement = (<TableToggle sampleKey={sampleKey} handleClick={props.handleClick} />)\r\n    }\r\n\r\n    return (\r\n        <td className={setSortingClass(activeKey, sampleKey)}>{TableHeadCellElement}</td>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableToggle(props) {\r\n    let sampleKey = props.sampleKey;\r\n    return (\r\n        <a href=\"#\" onClick={props.handleClick.bind(this, sampleKey)}>{sampleKey}</a>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableRows(props) {\r\n    let activeKey = props.activeKey;\r\n    let items = props.items;\r\n    let itemKeys = props.itemKeys;\r\n\r\n    let tableRows = items.map((item, index) => {\r\n        return (\r\n            <TableRow key={item.id} activeKey={activeKey} itemKeys={itemKeys} item={item} />\r\n        )\r\n    })\r\n\r\n    return tableRows;\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableRow(props) {\r\n    let activeKey = props.activeKey;\r\n    let item = props.item;\r\n    let itemKeys = props.itemKeys;\r\n\r\n    let tableCells = itemKeys.map((itemKey, index) => {\r\n        if (itemKey !== 'id') {\r\n            return (\r\n                <TableCell key={itemKey} activeKey={activeKey} itemKey={itemKey} itemValue={item[itemKey]} />\r\n            )\r\n        }\r\n    })\r\n\r\n    return (\r\n        <tr>\r\n            {tableCells}\r\n        </tr>\r\n    )\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction TableCell(props) {\r\n    let activeKey = props.activeKey;\r\n    let itemKey = props.itemKey;\r\n    let itemValue = props.itemValue;\r\n\r\n    return (\r\n        <td className={setSortingClass(activeKey, itemKey)}>{itemValue}</td>\r\n    )\r\n}\r\n\r\n/**\r\n * Reset table data to show defaults\r\n */\r\n\r\n/**\r\n * Reset button component\r\n */\r\nfunction ResetButton(props) {\r\n    return (\r\n        <a href=\"#\" onClick={props.handleResetClick}>reset</a>\r\n    )\r\n}\r\n\r\nReactDOM.render(<TableElement items={items} />, document.getElementById('root'));"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvRGF0YVRhYmxlWC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0FDQUEsSUFBSSxRQUFRO0FBQ1IsZ0JBQVksS0FESjtBQUVSLG9CQUFnQixLQUZSO0FBR1IsVUFBTSxDQUNGO0FBQ0ksWUFBSSxDQURSO0FBRUksY0FBTSxLQUZWO0FBR0ksbUJBQVcsU0FIZjtBQUlJLHFCQUFhLFVBSmpCO0FBS0ksYUFBSyxFQUxUO0FBTUksZ0JBQVE7QUFOWixLQURFLEVBU0Y7QUFDSSxZQUFJLENBRFI7QUFFSSxjQUFNLE9BRlY7QUFHSSxtQkFBVyxTQUhmO0FBSUkscUJBQWEsV0FKakI7QUFLSSxhQUFLLEVBTFQ7QUFNSSxnQkFBUTtBQU5aLEtBVEUsRUFpQkY7QUFDSSxZQUFJLENBRFI7QUFFSSxjQUFNLE9BRlY7QUFHSSxtQkFBVyxTQUhmO0FBSUkscUJBQWEsU0FKakI7QUFLSSxhQUFLLEVBTFQ7QUFNSSxnQkFBUTtBQU5aLEtBakJFLEVBeUJGO0FBQ0ksWUFBSSxDQURSO0FBRUksY0FBTSxNQUZWO0FBR0ksbUJBQVcsVUFIZjtBQUlJLHFCQUFhLFVBSmpCO0FBS0ksYUFBSyxFQUxUO0FBTUksZ0JBQVE7QUFOWixLQXpCRTs7QUFvQ1Y7OztBQXZDWSxDQUFaO0lBMENNLFk7OztBQUNGLDBCQUFZLEtBQVosRUFBbUI7QUFBQTs7QUFBQSxnSUFFVCxLQUZTO0FBQ2Y7OztBQUdBLGNBQUssVUFBTCxHQUFrQixNQUFNLEtBQU4sQ0FBWSxVQUE5QjtBQUNBLGNBQUssS0FBTCxHQUFhLE1BQU0sS0FBTixDQUFZLElBQXpCO0FBQ0EsY0FBSyxRQUFMLEdBQWdCLE9BQU8sSUFBUCxDQUFZLE1BQUssS0FBTCxDQUFXLENBQVgsQ0FBWixDQUFoQjs7QUFFQSxjQUFLLEtBQUwsR0FBYTtBQUNULG1CQUFPLE1BQUssS0FESDtBQUVULHNCQUFVLEtBRkQ7QUFHVCx1QkFB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QUEsVUFBSSxXQUFXLGdCQUFnQixTQUFoQixFQUEyQixPQUEzQixDQUFmO0FBQXFEO0FBQXJELEtBREo7QUFHSDs7QUFFRDs7OztBQUlBOzs7QUFHQSxTQUFTLFdBQVQsQ0FBcUIsS0FBckIsRUFBNEI7QUFDeEIsV0FDSTtBQUFBO0FBQUEsVUFBRyxNQUFLLEdBQVIsRUFBWSxTQUFTLE1BQU0sZ0JBQTNCO0FBQUE7QUFBQSxLQURKO0FBR0g7O0FBRUQsU0FBUyxNQUFULENBQWdCLG9CQUFDLFlBQUQsSUFBYyxPQUFPLEtBQXJCLEdBQWhCLEVBQWdELFNBQVMsY0FBVCxDQUF3QixNQUF4QixDQUFoRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImxldCBpdGVtcyA9IHtcclxuICAgIGluaXRpYWxLZXk6ICdhZ2UnLFxyXG4gICAgaW5pdGlhbFJldmVyc2U6IGZhbHNlLFxyXG4gICAgZGF0YTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIG5hbWU6IFwib3p5XCIsXHJcbiAgICAgICAgICAgIGV0aG5pY2l0eTogXCJjaGluZXNlXCIsXHJcbiAgICAgICAgICAgIG5hdGlvbmFsaXR5OiBcImFtZXJpY2FuXCIsXHJcbiAgICAgICAgICAgIGFnZTogMjgsXHJcbiAgICAgICAgICAgIGhlaWdodDogNzBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDEsXHJcbiAgICAgICAgICAgIG5hbWU6ICdlZHNvbicsXHJcbiAgICAgICAgICAgIGV0aG5pY2l0eTogJ21lc3Rpem8nLFxyXG4gICAgICAgICAgICBuYXRpb25hbGl0eTogJ2JyYXppbGlhbicsXHJcbiAgICAgICAgICAgIGFnZTogMzEsXHJcbiAgICAgICAgICAgIGhlaWdodDogNzJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDIsXHJcbiAgICAgICAgICAgIG5hbWU6IFwicmlja3lcIixcclxuICAgICAgICAgICAgZXRobmljaXR5OiBcInNwYW5pc2hcIixcclxuICAgICAgICAgICAgbmF0aW9uYWxpdHk6IFwic3BhbmlzaFwiLFxyXG4gICAgICAgICAgICBhZ2U6IDI3LFxyXG4gICAgICAgICAgICBoZWlnaHQ6IDc1XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiAzLFxyXG4gICAgICAgICAgICBuYW1lOiBcInJpc2FcIixcclxuICAgICAgICAgICAgZXRobmljaXR5OiBcImphcGFuZXNlXCIsXHJcbiAgICAgICAgICAgIG5hdGlvbmFsaXR5OiBcImphcGFuZXNlXCIsXHJcbiAgICAgICAgICAgIGFnZTogMjQsXHJcbiAgICAgICAgICAgIGhlaWdodDogNjVcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmNsYXNzIFRhYmxlRWxlbWVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjb25zdHJ1Y3RvcicpO1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0aWFsS2V5ID0gcHJvcHMuaXRlbXMuaW5pdGlhbEtleTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gcHJvcHMuaXRlbXMuZGF0YTtcclxuICAgICAgICB0aGlzLml0ZW1LZXlzID0gT2JqZWN0LmtleXModGhpcy5pdGVtc1swXSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLml0ZW1zLFxyXG4gICAgICAgICAgICByZXZlcnNlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGFjdGl2ZUtleTogbnVsbCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVSZXNldENsaWNrID0gdGhpcy5oYW5kbGVSZXNldENsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnRXaWxsTW91bnQnKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaW5pdERhdGEodGhpcy5pdGVtcyksXHJcbiAgICAgICAgICAgIGFjdGl2ZUtleTogdGhpcy5pbml0aWFsS2V5XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY29tcG9uZW50RGlkTW91bnQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBpbml0RGF0YShwcm9wcykge1xyXG4gICAgICAgIGxldCBpbml0RGF0YTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbEtleSkge1xyXG4gICAgICAgICAgICBpbml0RGF0YSA9IHRoaXMuc29ydGVkRGF0YSh0aGlzLmluaXRpYWxLZXkpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5pdERhdGEgPSB0aGlzLml0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluaXREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIGNsb25lZERhdGEoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhLnNsaWNlKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIHNvcnRlZERhdGEoa2V5KSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3NvcnRlZERhdGEnKTtcclxuICAgICAgICBsZXQgdGhpc0Nsb25lZERhdGEgPSB0aGlzLmNsb25lZERhdGEodGhpcy5pdGVtcyk7XHJcbiAgICAgICAgbGV0IHNvcnRlZENsb25lZERhdGEgPSB0aGlzQ2xvbmVkRGF0YS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnJldmVyc2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtyZXZlcnNlZDogZmFsc2V9KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJba2V5XSAtIGFba2V5XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3JldmVyc2VkOiB0cnVlfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gLSBiW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNvcnRlZENsb25lZERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlU3RhdGUoaXRlbUtleSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc29ydGVkRGF0YShpdGVtS2V5KSk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB0aGlzLnNvcnRlZERhdGEoaXRlbUtleSksXHJcbiAgICAgICAgICAgIGFjdGl2ZUtleTogaXRlbUtleVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlQ2xpY2soaXRlbUtleSkge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU3RhdGUoaXRlbUtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgcmVzZXREYXRhKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBhY3RpdmVLZXk6IHRoaXMuaW5pdGlhbEtleSxcclxuICAgICAgICAgICAgaXRlbXM6IHRoaXMuaXRlbXMsXHJcbiAgICAgICAgICAgIHJldmVyc2VkOiBmYWxzZVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUmVzZXRDbGljaygpIHtcclxuICAgICAgICB0aGlzLnJlc2V0RGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygncmVuZGVyJyk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXRhdGFibGV4XCI+XHJcbiAgICAgICAgICAgICAgICA8dGFibGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8VGFibGVIZWFkIGFjdGl2ZUtleT17dGhpcy5zdGF0ZS5hY3RpdmVLZXl9IGl0ZW1zPXt0aGlzLml0ZW1zfSBpdGVtS2V5cz17dGhpcy5pdGVtS2V5c30gaGFuZGxlQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxUYWJsZVJvd3MgYWN0aXZlS2V5PXt0aGlzLnN0YXRlLmFjdGl2ZUtleX0gaXRlbXM9e3RoaXMuc3RhdGUuaXRlbXN9IGl0ZW1LZXlzPXt0aGlzLml0ZW1LZXlzfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgICAgPFJlc2V0QnV0dG9uIGhhbmRsZVJlc2V0Q2xpY2s9e3RoaXMuaGFuZGxlUmVzZXRDbGlja30gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRTb3J0aW5nQ2xhc3MoYWN0aXZlS2V5LCBzYW1wbGVLZXkpIHtcclxuICAgIGxldCBjbGFzc05hbWUgPSAnJztcclxuXHJcbiAgICBpZiAoYWN0aXZlS2V5ID09PSBzYW1wbGVLZXkpIHtcclxuICAgICAgICBjbGFzc05hbWUgKz0gJ2lzLXNvcnRpbmcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjbGFzc05hbWUgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2xhc3NOYW1lO1xyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiBUYWJsZUhlYWQocHJvcHMpIHtcclxuICAgIGxldCBpdGVtS2V5cyA9IHByb3BzLml0ZW1LZXlzO1xyXG4gICAgbGV0IGl0ZW1zID0gcHJvcHMuaXRlbXM7XHJcbiAgICBsZXQgc2FtcGxlSXRlbSA9IGl0ZW1zWzBdO1xyXG4gICAgXHJcbiAgICBsZXQgVGFibGVIZWFkQ2VsbHMgPSBpdGVtS2V5cy5tYXAoKGl0ZW1LZXksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1LZXkgIT09ICdpZCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxUYWJsZUhlYWRDZWxsIFxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17aXRlbUtleX1cclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e3Byb3BzLmFjdGl2ZUtleX1cclxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVLZXk9e2l0ZW1LZXl9IFxyXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUtleVZhbHVlPXtzYW1wbGVJdGVtW2l0ZW1LZXldfSBcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVDbGljaz17cHJvcHMuaGFuZGxlQ2xpY2t9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgICAge1RhYmxlSGVhZENlbGxzfVxyXG4gICAgICAgIDwvdHI+XHJcbiAgICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIFRhYmxlSGVhZENlbGwocHJvcHMpIHtcclxuICAgIGxldCBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXk7XHJcbiAgICBsZXQgc2FtcGxlS2V5ID0gcHJvcHMuc2FtcGxlS2V5O1xyXG4gICAgbGV0IHNhbXBsZUtleVZhbHVlID0gcHJvcHMuc2FtcGxlS2V5VmFsdWU7XHJcblxyXG4gICAgbGV0IFRhYmxlSGVhZENlbGxFbGVtZW50O1xyXG5cclxuICAgIGlmIChpc05hTihzYW1wbGVLZXlWYWx1ZSkpIHtcclxuICAgICAgICBUYWJsZUhlYWRDZWxsRWxlbWVudCA9IChzYW1wbGVLZXkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIFRhYmxlSGVhZENlbGxFbGVtZW50ID0gKDxUYWJsZVRvZ2dsZSBzYW1wbGVLZXk9e3NhbXBsZUtleX0gaGFuZGxlQ2xpY2s9e3Byb3BzLmhhbmRsZUNsaWNrfSAvPilcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDx0ZCBjbGFzc05hbWU9e3NldFNvcnRpbmdDbGFzcyhhY3RpdmVLZXksIHNhbXBsZUtleSl9PntUYWJsZUhlYWRDZWxsRWxlbWVudH08L3RkPlxyXG4gICAgKVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiBUYWJsZVRvZ2dsZShwcm9wcykge1xyXG4gICAgbGV0IHNhbXBsZUtleSA9IHByb3BzLnNhbXBsZUtleTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtwcm9wcy5oYW5kbGVDbGljay5iaW5kKHRoaXMsIHNhbXBsZUtleSl9PntzYW1wbGVLZXl9PC9hPlxyXG4gICAgKVxyXG59XHJcblxyXG4vKipcclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiBUYWJsZVJvd3MocHJvcHMpIHtcclxuICAgIGxldCBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXk7XHJcbiAgICBsZXQgaXRlbXMgPSBwcm9wcy5pdGVtcztcclxuICAgIGxldCBpdGVtS2V5cyA9IHByb3BzLml0ZW1LZXlzO1xyXG5cclxuICAgIGxldCB0YWJsZVJvd3MgPSBpdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPFRhYmxlUm93IGtleT17aXRlbS5pZH0gYWN0aXZlS2V5PXthY3RpdmVLZXl9IGl0ZW1LZXlzPXtpdGVtS2V5c30gaXRlbT17aXRlbX0gLz5cclxuICAgICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiB0YWJsZVJvd3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIFRhYmxlUm93KHByb3BzKSB7XHJcbiAgICBsZXQgYWN0aXZlS2V5ID0gcHJvcHMuYWN0aXZlS2V5O1xyXG4gICAgbGV0IGl0ZW0gPSBwcm9wcy5pdGVtO1xyXG4gICAgbGV0IGl0ZW1LZXlzID0gcHJvcHMuaXRlbUtleXM7XHJcblxyXG4gICAgbGV0IHRhYmxlQ2VsbHMgPSBpdGVtS2V5cy5tYXAoKGl0ZW1LZXksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1LZXkgIT09ICdpZCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxUYWJsZUNlbGwga2V5PXtpdGVtS2V5fSBhY3RpdmVLZXk9e2FjdGl2ZUtleX0gaXRlbUtleT17aXRlbUtleX0gaXRlbVZhbHVlPXtpdGVtW2l0ZW1LZXldfSAvPlxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgICAge3RhYmxlQ2VsbHN9XHJcbiAgICAgICAgPC90cj5cclxuICAgIClcclxufVxyXG5cclxuLyoqXHJcbiAqIFxyXG4gKi9cclxuZnVuY3Rpb24gVGFibGVDZWxsKHByb3BzKSB7XHJcbiAgICBsZXQgYWN0aXZlS2V5ID0gcHJvcHMuYWN0aXZlS2V5O1xyXG4gICAgbGV0IGl0ZW1LZXkgPSBwcm9wcy5pdGVtS2V5O1xyXG4gICAgbGV0IGl0ZW1WYWx1ZSA9IHByb3BzLml0ZW1WYWx1ZTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDx0ZCBjbGFzc05hbWU9e3NldFNvcnRpbmdDbGFzcyhhY3RpdmVLZXksIGl0ZW1LZXkpfT57aXRlbVZhbHVlfTwvdGQ+XHJcbiAgICApXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNldCB0YWJsZSBkYXRhIHRvIHNob3cgZGVmYXVsdHNcclxuICovXHJcblxyXG4vKipcclxuICogUmVzZXQgYnV0dG9uIGNvbXBvbmVudFxyXG4gKi9cclxuZnVuY3Rpb24gUmVzZXRCdXR0b24ocHJvcHMpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtwcm9wcy5oYW5kbGVSZXNldENsaWNrfT5yZXNldDwvYT5cclxuICAgIClcclxufVxyXG5cclxuUmVhY3RET00ucmVuZGVyKDxUYWJsZUVsZW1lbnQgaXRlbXM9e2l0ZW1zfSAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7Il19"}